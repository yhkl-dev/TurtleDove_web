webpackJsonp([10],{EMlb:function(n,e,t){"use strict";e.d=function(n){return Object(a.a)({url:"/projectList/",method:"get",params:n})},e.b=function(n){return Object(a.a)({url:"/projectList/",method:"post",data:n})},e.f=function(n,e){return Object(a.a)({url:"/projectList/"+n+"/",method:"put",data:e})},e.a=function(n){return Object(a.a)({url:"/projectConfigure/",method:"post",data:n})},e.e=function(n,e){return Object(a.a)({url:"/projectConfigure/"+n+"/",method:"put",data:e})},e.c=function(n){return Object(a.a)({url:"/projectConfigure/"+n+"/",method:"delete"})};var a=t("vLgD")},RZtc:function(n,e,t){var a=t("vqrG");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("8bSs")("1bce03c6",a,!0)},ZEuc:function(n,e,t){var a=t("ZG0D");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t("8bSs")("79696d28",a,!0)},ZG0D:function(n,e,t){(n.exports=t("UTlt")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},lIxK:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("EMlb"),r={name:"ProjectConfigure",props:["projectConfigureParameter","projectId"],data:function(){return{addFormVisible:!1,addParameterForm:{item_name:"",item_value:"",belong_project:""}}},methods:{handleCommitAddParameter:function(){var n=this;this.addParameterForm.belong_project=this.projectId,Object(a.a)(this.addParameterForm).then(function(){n.$message({message:"添加成功",type:"success"}),n.addFormVisible=!1,n.$emit("refresh")})},handleAddParameter:function(){this.addFormVisible=!0},cancelEdit:function(n){n.value=n.originalValue,n.name=n.originalName,n.edit=!1,this.$message({message:"The Parameter has been restored to the original value",type:"warning"})},confirmEdit:function(n){var e=this;n.edit=!1,n.originalValue=n.value,n.originalName=n.name;var t={id:n.id,item_name:n.name,item_value:n.value,belong_project:this.projectId};try{Object(a.e)(t.id,t).then(function(){e.$message({message:"The parameter has been edited",type:"success"}),e.$emit("refresh")})}catch(e){n.value=n.originalValue,n.name=n.originalName,this.$message({message:"The parameter change failed",type:"danger"})}},handleDeleteParams:function(n){var e=this;this.$confirm("此操作将删除 [ "+n.name+" ] 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.c)(n.id).then(function(){e.$message({message:"删除成功",type:"success"}),e.$emit("refresh")})}).catch(function(){e.$message({message:"操作失败",type:"warning"})})}}},i={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("div",{staticClass:"filter-container"},[t("el-form",{attrs:{inline:!0,model:n.addParameterForm}},[t("el-form-item",[!1===n.addFormVisible?t("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus",circle:""},on:{click:n.handleAddParameter}}):n._e(),n._v(" "),!0===n.addFormVisible?t("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-minus",circle:""},on:{click:function(e){n.addFormVisible=!1}}}):n._e()],1),n._v(" "),n.addFormVisible?t("el-form-item",{attrs:{label:"key"}},[t("el-input",{attrs:{width:"80%",placeholder:"key",size:"mini"},model:{value:n.addParameterForm.item_name,callback:function(e){n.$set(n.addParameterForm,"item_name",e)},expression:"addParameterForm.item_name"}})],1):n._e(),n._v(" "),n.addFormVisible?t("el-form-item",{attrs:{label:"value"}},[t("el-input",{attrs:{width:"80%",placeholder:"value",size:"mini"},model:{value:n.addParameterForm.item_value,callback:function(e){n.$set(n.addParameterForm,"item_value",e)},expression:"addParameterForm.item_value"}})],1):n._e(),n._v(" "),n.addFormVisible?t("el-form-item",[t("el-button",{attrs:{size:"mini",type:"text"},on:{click:n.handleCommitAddParameter}},[n._v("Save")])],1):n._e()],1)],1),n._v(" "),t("el-table",{attrs:{data:n.projectConfigureParameter,"show-header":!1}},[t("el-table-column",{attrs:{align:"left"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.row;return[a.edit?[t("el-row",[t("el-col",[t("el-input",{attrs:{size:"mini"},model:{value:a.name,callback:function(e){n.$set(a,"name",e)},expression:"row.name"}})],1)],1)]:t("span",[n._v(n._s(a.name))])]}}])}),n._v(" "),t("el-table-column",{scopedSlots:n._u([{key:"default",fn:function(e){var a=e.row;return[a.edit?[t("el-row",{attrs:{gutter:5}},[t("el-col",{attrs:{span:20}},[t("el-input",{staticClass:"edit-input",attrs:{size:"mini"},model:{value:a.value,callback:function(e){n.$set(a,"value",e)},expression:"row.value"}})],1),n._v(" "),t("el-col",{attrs:{span:1}},[t("el-button",{attrs:{size:"mini",icon:"el-icon-refresh",type:"text"},on:{click:function(e){return n.cancelEdit(a)}}},[n._v("cancel\n              ")])],1)],1)]:t("span",[n._v(n._s(a.value))])]}}])}),n._v(" "),t("el-table-column",{attrs:{align:"center"},scopedSlots:n._u([{key:"default",fn:function(e){var a=e.row;return[a.edit?t("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-check",circle:""},on:{click:function(e){return n.confirmEdit(a)}}}):t("el-button",{attrs:{type:"text",size:"mini",circle:"",plain:"",icon:"el-icon-edit"},on:{click:function(n){a.edit=!a.edit}}}),n._v(" "),t("el-button",{attrs:{size:"mini",type:"text",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(e){return n.handleDeleteParams(a)}}})]}}])})],1)],1)},staticRenderFns:[]};var o={name:"ProjectList",components:{ProjectConfigure:t("/Xao")(r,i,!1,function(n){t("RZtc")},"data-v-fadbd692",null).exports},data:function(){return{loading:!1,addProjectVisible:!1,updateProjectVisible:!1,projectList:[],projectConfigureParameter:[],searchForm:{page:1,page_size:5},addProjectForm:{project_name_en:"",project_name_zh:""},updateProjectForm:{id:"",project_name_en:"",project_name_zh:""},projectId:"",projectName:"",totalNum:0,rules:{project_name_zh:[{required:!0,message:"请输入项目中文名",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}],project_name_en:[{required:!0,message:"请输入项目英文名",trigger:"blur"},{min:4,max:15,message:"长度在 4 到 15 个字符",trigger:"blur"}]}}},methods:{fetchData:function(){var n=this;this.loading=!0,Object(a.d)(this.searchForm).then(function(e){n.projectList=e.results,n.totalNum=e.count,n.loading=!1})},handleClick:function(n){var e=this;this.projectConfigureParameter=n.configurations,this.projectId=n.id,this.projectName=n.project_name;var t=this.projectConfigureParameter;this.projectConfigureParameter=t.map(function(n){return e.$set(n,"edit",!1),n.originalValue=n.value,n.originalName=n.name,n})},refresh:function(){this.fetchData()},handleAddProject:function(){void 0!==this.$refs.addProjectForm&&this.$refs.addProjectForm.resetFields(),this.addProjectVisible=!0},handleCommitAddProject:function(){var n=this;Object(a.b)(this.addProjectForm).then(function(){n.$message({message:"添加成功",type:"success"}),n.addProjectVisible=!1,n.fetchData()})},handleUpdateProject:function(n){this.updateProjectVisible=!0;var e=n.id,t=n.project_name_en,a=n.project_name_zh;this.updateProjectForm={id:e,project_name_en:t,project_name_zh:a}},handleCommitUpdateProject:function(){var n=this;Object(a.f)(this.updateProjectForm.id,this.updateProjectForm).then(function(){n.$message({message:"修改成功",type:"success"}),n.updateProjectVisible=!1,n.fetchData()})},handleDeleteProject:function(n){var e=this;this.$confirm("此操作将删除 [ "+n.project_name+" ] 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:n.id,project_name_en:n.project_name_en,project_name_zh:n.project_name_zh,is_deleted:1};Object(a.f)(t.id,t).then(function(){e.$message({message:"删除成功",type:"success"}),e.updateProjectVisible=!1,e.fetchData()})}).catch(function(){e.$message({message:"操作失败",type:"warning"})})},paginationChange:function(n){this.searchForm.page=n,this.fetchData()}},created:function(){this.fetchData()}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"app-container"},[t("el-row",{attrs:{gutter:24}},[t("el-col",{attrs:{span:7}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("span",[n._v("项目列表")]),n._v(" "),t("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text",icon:"el-icon-plus",circle:""},on:{click:n.handleAddProject}})],1),n._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],attrs:{data:n.projectList,"show-header":!1},on:{"row-click":n.handleClick}},[t("el-table-column",{attrs:{prop:"project_name",label:"项目名称",align:"center",width:"300px"}}),n._v(" "),t("el-table-column",{attrs:{label:"",align:"right"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return n.handleUpdateProject(e.row)}}},[n._v("edit")]),n._v(" "),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return n.handleDeleteProject(e.row)}}},[n._v("delete")])]}}])})],1),n._v(" "),t("div",{staticClass:"pagination-container"},[t("el-pagination",{directives:[{name:"show",rawName:"v-show",value:n.totalNum>=15,expression:"totalNum>=15"}],attrs:{background:"","pager-count":5,"page-size":n.searchForm.page_size,layout:"total, prev, pager, next, jumper","current-page":n.searchForm.page,total:n.totalNum},on:{"current-change":n.paginationChange,"update:currentPage":function(e){return n.$set(n.searchForm,"page",e)},"update:current-page":function(e){return n.$set(n.searchForm,"page",e)}}})],1)],1)],1),n._v(" "),t("el-col",{attrs:{span:17}},[t("el-card",[t("div",{attrs:{slot:"header"},slot:"header"},[t("h4",[n._v(n._s(this.projectName)+" 参数")])]),n._v(" "),t("project-configure",{attrs:{"project-configure-parameter":n.projectConfigureParameter,projectId:n.projectId},on:{refresh:n.refresh}})],1)],1)],1),n._v(" "),t("el-dialog",{attrs:{title:"新建项目",visible:n.addProjectVisible,width:"45%"},on:{"update:visible":function(e){n.addProjectVisible=e}}},[t("el-form",{attrs:{inline:!0,rules:n.rules,model:n.addProjectForm}},[t("el-form-item",{attrs:{label:"项目名称（中文)",prop:"project_name_zh"}},[t("el-input",{attrs:{size:"mini",placeholder:"项目名称（中文)"},model:{value:n.addProjectForm.project_name_zh,callback:function(e){n.$set(n.addProjectForm,"project_name_zh",e)},expression:"addProjectForm.project_name_zh"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目名称（英文)",prop:"project_name_en"}},[t("el-input",{attrs:{size:"mini",placeholder:"项目名称（英文)"},model:{value:n.addProjectForm.project_name_en,callback:function(e){n.$set(n.addProjectForm,"project_name_en",e)},expression:"addProjectForm.project_name_en"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:n.handleCommitAddProject}},[n._v("确定")]),n._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(e){n.addProjectVisible=!1}}},[n._v("取消")])],1)],1)],1),n._v(" "),t("el-dialog",{ref:n.updateProjectForm,attrs:{title:"编辑项目",visible:n.updateProjectVisible,width:"45%"},on:{"update:visible":function(e){n.updateProjectVisible=e}}},[t("el-form",{attrs:{inline:!0,rules:n.rules,model:n.updateProjectForm}},[t("el-form-item",{attrs:{label:"项目名称（中文)",prop:"project_name_zh"}},[t("el-input",{attrs:{size:"mini",placeholder:"项目名称（中文)"},model:{value:n.updateProjectForm.project_name_zh,callback:function(e){n.$set(n.updateProjectForm,"project_name_zh",e)},expression:"updateProjectForm.project_name_zh"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"项目名称（英文)",prop:"project_name_en"}},[t("el-input",{attrs:{size:"mini",placeholder:"项目名称（英文)"},model:{value:n.updateProjectForm.project_name_en,callback:function(e){n.$set(n.updateProjectForm,"project_name_en",e)},expression:"updateProjectForm.project_name_en"}})],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:n.handleCommitUpdateProject}},[n._v("确定")]),n._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(e){n.updateProjectVisible=!1}}},[n._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var s=t("/Xao")(o,c,!1,function(n){t("ZEuc")},"data-v-0b79abbf",null);e.default=s.exports},vqrG:function(n,e,t){(n.exports=t("UTlt")(!1)).push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});