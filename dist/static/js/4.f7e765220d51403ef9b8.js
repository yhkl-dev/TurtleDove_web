webpackJsonp([4],{"+Swu":function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"01JI":function(e,t,n){var r=n("Zuni");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("839a0a1e",r,!0)},"0gbR":function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"0oXu":function(e,t,n){var r=n("DeBm");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("6225cfeb",r,!0)},"2fE/":function(e,t,n){var r=n("VUN0");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("8eab8900",r,!0)},"9Xjr":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("J7No"),a={name:"workOrderHistoryDetail",props:["workOrderDetail"],data:function(){return{activeNames:["1","2","3","4"]}},methods:{handleChange:function(e){console.log(e)},downloadAttachment:function(e){window.location.href=e},getElementIndex:function(e,t){if(null!==t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].exec_user);return n.indexOf(t.exec_user)+1}}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[n("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"基础信息",name:"1"}},[n("el-row",[n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单标题")])]),e._v(" "),n("tr",[n("td",[e._v("工单状态")])]),e._v(" "),n("tr",[n("td",[e._v("项目名称")])]),e._v(" "),n("tr",[n("td",[e._v("当前审核人")])]),e._v(" "),n("tr",[n("td",[e._v("当前执行人")])]),e._v(" "),n("tr",[n("td",[e._v("附件")])])])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_title))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.status_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_project_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_audit_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_exec_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[null!==e.workOrderDetail.download_url?n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.downloadAttachment(e.workOrderDetail.download_url)}}},[e._v("\n                下载\n              ")]):e._e()],1)])])]),e._v(" "),n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单ID")])]),e._v(" "),n("tr",[n("td",[e._v("产品线")])]),e._v(" "),n("tr",[n("td",[e._v("平台")])]),e._v(" "),n("tr",[n("td",[e._v("创建时间")])]),e._v(" "),n("tr",[n("td",[e._v("更新时间")])])])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_task_id))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_product_name))])]),e._v(" "),n("tr",[n("td",e._l(e.workOrderDetail.order_env_type,function(t){return n("span",[n("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))]),e._v(" "),n("span")],1)}),0)]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.create_time))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.update_time))])])])])],1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"工单需求",name:"2"}},[n("div",[e._v(e._s(e.workOrderDetail.order_purpose))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"工单结果",name:"3"}},[n("div",[e._v(e._s(e.workOrderDetail.order_result))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"审核信息",name:"4"}},[n("el-steps",{attrs:{"finish-status":"success","process-status":"wait",space:200,active:e.getElementIndex(e.workOrderDetail.audit_flow,e.workOrderDetail.current_audit_flow)}},e._l(e.workOrderDetail.audit_flow,function(e,t){return n("el-step",{key:t,attrs:{icon:"el-icon-user-solid",title:e.exec_user,description:e.status_name}})}),1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"执行信息",name:"5"}},[n("el-steps",{attrs:{"finish-status":"success","process-status":"wait",space:200,active:e.getElementIndex(e.workOrderDetail.exec_flow,e.workOrderDetail.current_exec_flow)}},e._l(e.workOrderDetail.exec_flow,function(e,t){return n("el-step",{key:t,attrs:{icon:"el-icon-user-solid",title:e.exec_user,description:e.status_name}})}),1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"操作记录",name:"6"}},e._l(e.workOrderDetail.operation_records,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.status_name))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0),e._v(" "),n("el-collapse-item",{attrs:{title:"评论回复",name:"7"}},e._l(e.workOrderDetail.operation_logs,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0)],1)],1)},staticRenderFns:[]};var o={name:"MyWorkOrderHistoryList",components:{workOrderHistoryDetail:n("/Xao")(a,l,!1,function(e){n("wG7x")},"data-v-546ae7b9",null).exports},props:["workOrderHistoryList","totalNum","loading","workOrderModelList"],data:function(){return{workOrderTaskDetailVisible:!1,workOrderDetail:{},searchForm:{order_task_id:"",order_title:"",template_order_model:"",create_time_before:"",create_time_after:"",page:1,page_size:5},dateValue:""}},methods:{handleFilter:function(){null===this.dateValue||""===this.dateValue||0===this.dateValue.length?(this.searchForm.create_time_before="",this.searchForm.create_time_after=""):(this.searchForm.create_time_before=this.dateValue[1],this.searchForm.create_time_after=this.dateValue[0]),this.$emit("handleSearchTask",this.searchForm)},checkWorkOrderTaskDetail:function(e){this.workOrderTaskDetailVisible=!0,this.workOrderDetail=e},paginationChange:function(e){this.searchForm.page=e,this.handleFilter()}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{size:"small",placeholder:"工单类型","default-first-option":""},model:{value:e.searchForm.template_order_model,callback:function(t){e.$set(e.searchForm,"template_order_model",t)},expression:"searchForm.template_order_model"}},e._l(e.workOrderModelList,function(e,t){return n("el-option",{key:t,attrs:{label:e.model_name,value:e.id}})}),1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{size:"small",placeholder:"工单编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.searchForm.order_task_id,callback:function(t){e.$set(e.searchForm,"order_task_id",t)},expression:"searchForm.order_task_id"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.workOrderHistoryList,"highlight-current-row":""}},[n("el-table-column",{attrs:{label:"工单 ID",prop:"order_task_id",align:"center",width:"200px"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单类型",prop:"order_model",width:"100px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"申请人",prop:"created_user",width:"80px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"产品线",prop:"order_product_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目名称",prop:"order_project_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"平台",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.order_env_type,function(t){return n("span",[n("el-tag",[e._v(" "+e._s(t.name))]),e._v(" "),n("span")],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最终执行",prop:"current_exec_user",width:"100px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"最后更新时间",prop:"update_time",width:"150px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"流转完成时间",prop:"complete_time",width:"150px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(t.row.status_name)+" ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-document",circle:""},on:{click:function(n){return e.checkWorkOrderTaskDetail(t.row)}}})]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.totalNum>=0,expression:"totalNum>=0"}],attrs:{background:"","pager-count":5,"page-size":e.searchForm.page_size,layout:"total, prev, pager, next, jumper","current-page":e.searchForm.page,total:e.totalNum},on:{"current-change":e.paginationChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.workOrderTaskDetailVisible,width:"70%",center:""},on:{"update:visible":function(t){e.workOrderTaskDetailVisible=t}}},[n("template",{slot:"title"},[n("span",[n("h3",[e._v("工 单 详 情")])])]),e._v(" "),n("work-order-history-detail",{attrs:{workOrderDetail:e.workOrderDetail}})],2)],1)},staticRenderFns:[]};var i=n("/Xao")(o,s,!1,function(e){n("01JI")},"data-v-e03626a8",null).exports,c={name:"workOrderHistoryExecDetail",props:["workOrderDetail"],data:function(){return{activeNames:["1","2","3","4"]}},methods:{handleChange:function(e){console.log(e)},downloadAttachment:function(e){window.location.href=e},getElementIndex:function(e,t){if(null!==t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].exec_user);return n.indexOf(t.exec_user)+1}}}},d={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[n("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"基础信息",name:"1"}},[n("el-row",[n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单标题")])]),e._v(" "),n("tr",[n("td",[e._v("工单状态")])]),e._v(" "),n("tr",[n("td",[e._v("项目名称")])]),e._v(" "),n("tr",[n("td",[e._v("当前审核人")])]),e._v(" "),n("tr",[n("td",[e._v("当前执行人")])]),e._v(" "),n("tr",[n("td",[e._v("附件")])])])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_title))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.status_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_project_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_audit_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_exec_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[null!==e.workOrderDetail.download_url?n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.downloadAttachment(e.workOrderDetail.download_url)}}},[e._v("\n                下载\n              ")]):e._e()],1)])])]),e._v(" "),n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单ID")])]),e._v(" "),n("tr",[n("td",[e._v("产品线")])]),e._v(" "),n("tr",[n("td",[e._v("平台")])]),e._v(" "),n("tr",[n("td",[e._v("创建时间")])]),e._v(" "),n("tr",[n("td",[e._v("更新时间")])])])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_task_id))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_product_name))])]),e._v(" "),n("tr",[n("td",e._l(e.workOrderDetail.order_env_type,function(t){return n("span",[n("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))]),e._v(" "),n("span")],1)}),0)]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.create_time))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.update_time))])])])])],1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"工单需求",name:"2"}},[n("div",[e._v(e._s(e.workOrderDetail.order_purpose))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"工单结果",name:"3"}},[n("div",[e._v(e._s(e.workOrderDetail.order_result))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"执行信息",name:"4"}},[n("el-steps",{attrs:{"finish-status":"success","process-status":"wait",space:200,active:e.getElementIndex(e.workOrderDetail.exec_flow,e.workOrderDetail.current_exec_flow)}},e._l(e.workOrderDetail.exec_flow,function(e,t){return n("el-step",{key:t,attrs:{icon:"el-icon-user-solid",title:e.exec_user,description:e.status_name}})}),1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"操作记录",name:"6"}},e._l(e.workOrderDetail.operation_records,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.status_name))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0),e._v(" "),n("el-collapse-item",{attrs:{title:"评论回复",name:"7"}},e._l(e.workOrderDetail.operation_logs,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0)],1)],1)},staticRenderFns:[]};var _={name:"MyExecWorkOrderList",components:{workOrderHistoryExecDetail:n("/Xao")(c,d,!1,function(e){n("0oXu")},"data-v-7e4e8686",null).exports},props:["workOrderExecHistoryList","execLoading","execTotalNum","workOrderModelList"],data:function(){return{workOrderTaskDetailVisible:!1,workOrderDetail:{},searchForm:{order_task_id:"",order_title:"",template_order_model:"",create_time_before:"",create_time_after:"",page:1,page_size:5},pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]},dateValue:""}},methods:{checkWorkOrderTaskDetail:function(e){this.workOrderTaskDetailVisible=!0,this.workOrderDetail=e},paginationChange:function(e){this.searchForm.page=e,this.handleFilter()},handleFilter:function(){null===this.dateValue||""===this.dateValue||0===this.dateValue.length?(this.searchForm.create_time_before="",this.searchForm.create_time_after=""):(this.searchForm.create_time_before=this.dateValue[1],this.searchForm.create_time_after=this.dateValue[0]),this.$emit("handleSearchExecTask",this.searchForm)}}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{size:"small",placeholder:"工单类型","default-first-option":""},model:{value:e.searchForm.template_order_model,callback:function(t){e.$set(e.searchForm,"template_order_model",t)},expression:"searchForm.template_order_model"}},e._l(e.workOrderModelList,function(e,t){return n("el-option",{key:t,attrs:{label:e.model_name,value:e.id}})}),1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{size:"small",clearable:"",placeholder:"工单编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.searchForm.order_task_id,callback:function(t){e.$set(e.searchForm,"order_task_id",t)},expression:"searchForm.order_task_id"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.execLoading,expression:"execLoading"}],attrs:{data:e.workOrderExecHistoryList,"highlight-current-row":""}},[n("el-table-column",{attrs:{label:"工单 ID",prop:"order_task_id",align:"center",width:"200px"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单类型",prop:"order_model",width:"100px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"申请人",prop:"created_user",width:"80px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"产品线",prop:"order_product_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目名称",prop:"order_project_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"平台",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.order_env_type,function(t){return n("span",[n("el-tag",[e._v(" "+e._s(t.name))]),e._v(" "),n("span")],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最终执行",prop:"current_exec_user",width:"100px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"最后更新时间",prop:"update_time",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"流转完成时间",prop:"complete_time",width:"150px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(t.row.status_name)+" ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-document",circle:""},on:{click:function(n){return e.checkWorkOrderTaskDetail(t.row)}}})]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.execTotalNum>=0,expression:"execTotalNum>=0"}],attrs:{background:"","pager-count":5,"page-size":e.searchForm.page_size,layout:"total, prev, pager, next, jumper","current-page":e.searchForm.page,total:e.execTotalNum},on:{"current-change":e.paginationChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.workOrderTaskDetailVisible,width:"70%",center:""},on:{"update:visible":function(t){e.workOrderTaskDetailVisible=t}}},[n("template",{slot:"title"},[n("span",[n("h3",[e._v("工 单 详 情")])])]),e._v(" "),n("work-order-history-exec-detail",{attrs:{workOrderDetail:e.workOrderDetail}})],2)],1)},staticRenderFns:[]};var p=n("/Xao")(_,u,!1,function(e){n("D/UR")},"data-v-05d81fb0",null).exports,m={name:"workOrderHistoryAuditDetail",props:["workOrderDetail"],data:function(){return{activeNames:["1","2","3","4"]}},methods:{handleChange:function(e){console.log(e)},downloadAttachment:function(e){window.location.href=e},getElementIndex:function(e,t){if(null!==t){for(var n=[],r=0;r<e.length;r++)n.push(e[r].exec_user);return n.indexOf(t.exec_user)+1}}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"components-container"},[n("el-collapse",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"基础信息",name:"1"}},[n("el-row",[n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单标题")])]),e._v(" "),n("tr",[n("td",[e._v("工单状态")])]),e._v(" "),n("tr",[n("td",[e._v("项目名称")])]),e._v(" "),n("tr",[n("td",[e._v("当前审核人")])]),e._v(" "),n("tr",[n("td",[e._v("当前执行人")])]),e._v(" "),n("tr",[n("td",[e._v("附件")])])])]),e._v(" "),n("el-col",{attrs:{span:6}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_title))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.status_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_project_name))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_audit_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.current_exec_user||"暂无"))])]),e._v(" "),n("tr",[n("td",[null!==e.workOrderDetail.download_url?n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.downloadAttachment(e.workOrderDetail.download_url)}}},[e._v("\n                下载\n              ")]):e._e()],1)])])]),e._v(" "),n("el-col",{attrs:{span:2}},[n("table",[n("tr",[n("td",[e._v("工单ID")])]),e._v(" "),n("tr",[n("td",[e._v("产品线")])]),e._v(" "),n("tr",[n("td",[e._v("平台")])]),e._v(" "),n("tr",[n("td",[e._v("创建时间")])]),e._v(" "),n("tr",[n("td",[e._v("更新时间")])])])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("table",[n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_task_id))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.order_product_name))])]),e._v(" "),n("tr",[n("td",e._l(e.workOrderDetail.order_env_type,function(t){return n("span",[n("el-tag",{attrs:{size:"mini",type:"success"}},[e._v(e._s(t.name))]),e._v(" "),n("span")],1)}),0)]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.create_time))])]),e._v(" "),n("tr",[n("td",[e._v(e._s(e.workOrderDetail.update_time))])])])])],1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"工单需求",name:"2"}},[n("div",[e._v(e._s(e.workOrderDetail.order_purpose))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"工单结果",name:"3"}},[n("div",[e._v(e._s(e.workOrderDetail.order_result))])]),e._v(" "),n("el-collapse-item",{attrs:{title:"审核信息",name:"4"}},[n("el-steps",{attrs:{"finish-status":"success","process-status":"wait",space:200,active:e.getElementIndex(e.workOrderDetail.audit_flow,e.workOrderDetail.current_audit_flow)}},e._l(e.workOrderDetail.audit_flow,function(e,t){return n("el-step",{key:t,attrs:{icon:"el-icon-user-solid",title:e.exec_user,description:e.status_name}})}),1)],1),e._v(" "),n("el-collapse-item",{attrs:{title:"操作记录",name:"6"}},e._l(e.workOrderDetail.operation_records,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.status_name))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0),e._v(" "),n("el-collapse-item",{attrs:{title:"评论回复",name:"7"}},e._l(e.workOrderDetail.operation_logs,function(t,r){return n("div",{key:r},[n("el-row",[n("el-col",{attrs:{span:6}},[e._v(e._s(t.create_time))]),e._v(" "),n("el-col",{attrs:{span:3}},[e._v(e._s(t.ops_user))]),e._v(" "),n("el-col",{attrs:{span:4}},[e._v(e._s(t.ops_reply_content))])],1)],1)}),0)],1)],1)},staticRenderFns:[]};var h={name:"MyExecWorkOrderList",components:{workOrderHistoryAuditDetail:n("/Xao")(m,v,!1,function(e){n("2fE/")},"data-v-4098d38d",null).exports},props:["workOrderAuditHistoryList","auditLoading","auditTotalNum","workOrderModelList"],data:function(){return{workOrderTaskDetailVisible:!1,workOrderDetail:{},searchForm:{order_task_id:"",order_title:"",template_order_model:"",create_time_before:"",create_time_after:"",page:1,page_size:5},dateValue:"",pickerOptions:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-7776e6),e.$emit("pick",[n,t])}}]}}},methods:{checkWorkOrderTaskDetail:function(e){this.workOrderTaskDetailVisible=!0,this.workOrderDetail=e},paginationChange:function(e){this.searchForm.page=e,this.handleFilter()},handleFilter:function(){null===this.dateValue||""===this.dateValue||0===this.dateValue.length?(this.searchForm.create_time_before="",this.searchForm.create_time_after=""):(this.searchForm.create_time_before=this.dateValue[1],this.searchForm.create_time_after=this.dateValue[0]),this.$emit("handleSearchAuditTask",this.searchForm)}}},k={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:3}},[n("el-select",{attrs:{size:"small",placeholder:"工单类型","default-first-option":""},model:{value:e.searchForm.template_order_model,callback:function(t){e.$set(e.searchForm,"template_order_model",t)},expression:"searchForm.template_order_model"}},e._l(e.workOrderModelList,function(e,t){return n("el-option",{key:t,attrs:{label:e.model_name,value:e.id}})}),1)],1),e._v(" "),n("el-col",{attrs:{span:6}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{size:"small",type:"datetimerange","value-format":"yyyy-MM-dd HH:mm:ss",align:"right","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.dateValue,callback:function(t){e.dateValue=t},expression:"dateValue"}})],1),e._v(" "),n("el-col",{attrs:{span:4}},[n("el-input",{attrs:{size:"small",placeholder:"工单编号",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleFilter(t)}},model:{value:e.searchForm.order_task_id,callback:function(t){e.$set(e.searchForm,"order_task_id",t)},expression:"searchForm.order_task_id"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFilter},slot:"append"})],1)],1)],1)],1),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.auditLoading,expression:"auditLoading"}],attrs:{data:e.workOrderAuditHistoryList,"highlight-current-row":""}},[n("el-table-column",{attrs:{label:"工单 ID",prop:"order_task_id",align:"center",width:"200px"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单类型",prop:"order_model",width:"100px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"申请人",prop:"created_user",width:"80px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"产品线",prop:"order_product_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"项目名称",prop:"order_project_name",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"平台",width:"180px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.order_env_type,function(t){return n("span",[n("el-tag",[e._v(" "+e._s(t.name))]),e._v(" "),n("span")],1)})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"最终审核",prop:"current_audit_user",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"最后更新时间",prop:"update_time",width:"150px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"流转完成时间",prop:"complete_time",width:"150px",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"工单状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",[e._v(e._s(t.row.status_name)+" ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",plain:"",size:"mini",icon:"el-icon-document",circle:""},on:{click:function(n){return e.checkWorkOrderTaskDetail(t.row)}}})]}}])})],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{directives:[{name:"show",rawName:"v-show",value:e.auditTotalNum>=0,expression:"auditTotalNum>=0"}],attrs:{background:"","pager-count":5,"page-size":e.searchForm.page_size,layout:"total, prev, pager, next, jumper","current-page":e.searchForm.page,total:e.auditTotalNum},on:{"current-change":e.paginationChange,"update:currentPage":function(t){return e.$set(e.searchForm,"page",t)},"update:current-page":function(t){return e.$set(e.searchForm,"page",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{visible:e.workOrderTaskDetailVisible,width:"70%",center:""},on:{"update:visible":function(t){e.workOrderTaskDetailVisible=t}}},[n("template",{slot:"title"},[n("span",[n("h3",[e._v("工 单 详 情")])])]),e._v(" "),n("work-order-history-audit-detail",{attrs:{workOrderDetail:e.workOrderDetail}})],2)],1)},staticRenderFns:[]};var w={name:"workOrderHistory",components:{MyWorkOrderHistoryList:i,MyExecWorkOrderList:p,MyAuditWorkOrderList:n("/Xao")(h,k,!1,function(e){n("cS/q")},"data-v-10d2ecc7",null).exports},data:function(){return{loading:!1,execLoading:!1,auditLoading:!1,workOrderHistoryList:[],workOrderExecHistoryList:[],workOrderAuditHistoryList:[],workOrderModelList:[],searchForm:{page:1,page_size:5},totalNum:0,execTotalNum:0,auditTotalNum:0}},methods:{fetchData:function(){var e=this;this.loading=!0,Object(r.y)(this.searchForm).then(function(t){e.workOrderHistoryList=t.results,e.totalNum=t.count,e.loading=!1}),Object(r.n)().then(function(t){e.workOrderModelList=t.results})},getWorkOrderTaskExecHistorys:function(){var e=this;this.execLoading=!0,Object(r.w)(this.searchForm).then(function(t){e.workOrderExecHistoryList=t.results,e.execTotalNum=t.count,e.execLoading=!1})},getWorkOrderTaskAuditHistorys:function(){var e=this;this.auditLoading=!0,Object(r.u)(this.searchForm).then(function(t){e.workOrderAuditHistoryList=t.results,e.auditTotalNum=t.count,e.auditLoading=!1})},handleSearchTask:function(e){this.searchForm=e,this.fetchData()},handleSearchExecTask:function(e){this.searchForm=e,this.getWorkOrderTaskExecHistorys()},handleSearchAuditTask:function(e){this.searchForm=e,this.getWorkOrderTaskAuditHistorys()}},created:function(){this.fetchData(),this.getWorkOrderTaskExecHistorys(),this.getWorkOrderTaskAuditHistorys()}},f={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("申请历史")])]),e._v(" "),n("my-work-order-history-list",{attrs:{workOrderHistoryList:e.workOrderHistoryList,totalNum:e.totalNum,workOrderModelList:e.workOrderModelList,loading:e.loading},on:{handleSearchTask:e.handleSearchTask}})],1),e._v(" "),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("审核历史")])]),e._v(" "),n("my-audit-work-order-list",{attrs:{workOrderAuditHistoryList:e.workOrderAuditHistoryList,auditTotalNum:e.auditTotalNum,workOrderModelList:e.workOrderModelList,auditLoading:e.auditLoading},on:{handleSearchAuditTask:e.handleSearchAuditTask}})],1),e._v(" "),n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[e._v("执行历史")])]),e._v(" "),n("my-exec-work-order-list",{attrs:{workOrderExecHistoryList:e.workOrderExecHistoryList,execTotalNum:e.execTotalNum,workOrderModelList:e.workOrderModelList,execLoading:e.execLoading},on:{handleSearchExecTask:e.handleSearchExecTask}})],1)],1)},staticRenderFns:[]};var g=n("/Xao")(w,f,!1,function(e){n("AvzW")},"data-v-537b4edc",null);t.default=g.exports},AvzW:function(e,t,n){var r=n("FVFu");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("6e55799e",r,!0)},"D/UR":function(e,t,n){var r=n("0gbR");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("2ee9f271",r,!0)},DeBm:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n.el-row[data-v-7e4e8686] {\n  margin-bottom: 10px;\n}\n",""])},FVFu:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n.el-card[data-v-537b4edc] {\n  margin-bottom: 10px;\n}\n",""])},VUN0:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n.el-row[data-v-4098d38d] {\n  margin-bottom: 10px;\n}\n",""])},Zuni:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},"cS/q":function(e,t,n){var r=n("+Swu");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("2d80ec7c",r,!0)},m9tM:function(e,t,n){(e.exports=n("UTlt")(!1)).push([e.i,"\n.el-row[data-v-546ae7b9] {\n  margin-bottom: 10px;\n}\n",""])},wG7x:function(e,t,n){var r=n("m9tM");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);n("8bSs")("25330c54",r,!0)}});