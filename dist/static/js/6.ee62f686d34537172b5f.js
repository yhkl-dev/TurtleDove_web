webpackJsonp([6],{"+wpU":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7FXV"),l={bind:function(t,e,a){var s=t.querySelector(".el-dialog__header"),l=t.querySelector(".el-dialog");s.style.cssText+=";cursor:move;",l.style.cssText+=";top:0px;";var n=window.document.currentStyle?function(t,e){return t.currentStyle[e]}:function(t,e){return getComputedStyle(t,!1)[e]};s.onmousedown=function(t){var e=t.clientX-s.offsetLeft,i=t.clientY-s.offsetTop,o=l.offsetWidth,r=l.offsetHeight,d=document.body.clientWidth,c=document.body.clientHeight,u=l.offsetLeft,h=d-l.offsetLeft-o,p=l.offsetTop,m=c-l.offsetTop-r,f=n(l,"left"),g=n(l,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(t){var s=t.clientX-e,n=t.clientY-i;-s>u?s=-u:s>h&&(s=h),-n>p?n=-p:n>m&&(n=m),l.style.cssText+=";left:"+(s+f)+"px;top:"+(n+g)+"px;",a.child.$emit("dragDialog")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null}}}},n=function(t){t.directive("el-drag-dialog",l)};window.Vue&&(window["el-drag-dialog"]=l,Vue.use(n)),l.install=n;var i={name:"AdhocTask",props:["params","adhocTaskLists","statusOptions","adhocTotalNum"],directives:{elDragDialog:l},filters:{statusFilter:function(t){return{Y:"success",N:"info",R:"warning"}[t]},resultFilter:function(t){return{failed:"danger",ok:"success",unreachable:"warning"}[t]}},data:function(){return{statusChange:!1,loading:!1,jsonData:"",dialogTableVisible:!1,adhocTaskList:this.adhocTaskLists,result_page:1,ChangeTaskStatus:{id:"",name:"",status:"R"},deleteTaskStatus:{id:"",status:"",name:"",is_visible:"N"},detail_result:""}},methods:{updateTask:function(t){void 0!==this.$refs.ChangeTaskStatus&&this.$refs.ChangeTaskStatus.resetFields();var e=t.id,a=t.name,s=t.status;this.ChangeTaskStatus={id:e,name:a,status:s},this.ChangeTaskStatus.status="R"},deleteTask:function(t){void 0!==this.$refs.deleteTaskStatus&&this.$refs.deleteTaskStatus.resetFields();var e=t.id,a=t.is_visible,s=t.status,l=t.name;this.deleteTaskStatus={id:e,is_visible:a,status:s,name:l},this.deleteTaskStatus.is_visible="N"},handleCurrentChange:function(t){this.$emit("handleCurrentChangeAdhoc",t)},handleEditClick:function(t){this.updateTask(t),this.$emit("handleEditAdhocClick",this.ChangeTaskStatus)},handleDeleteClick:function(t){this.deleteTask(t),console.log(this.deleteTaskStatus),this.$emit("handleDeleteAdhocClick",this.deleteTaskStatus)},handleDrag:function(t){this.dialogTableVisible=!0,this.detail_result=JSON.parse(t.detail_result)}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.adhocTaskLists,"element-loading-text":"Loading...",border:"",size:"medium","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"180px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"exec_host",label:"执行主机",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"model_name",label:"模块名称",width:"80px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"model_args",label:"模块参数",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"执行结果",width:"250px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.result_view,function(e){return a("span",[a("el-tag",{attrs:{size:"mini ",type:t._f("resultFilter")(e.name)}},[t._v("\n                "+t._s(e.name)+"\n                ")]),t._v(" "),a("span",{staticStyle:{color:"#4d4d4d"}},[t._v(" "+t._s(e.num))]),t._v(" "),a("span")],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"exec_time",label:"执行时间",width:"170px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"170px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","class-name":"status-col",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return["Y"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          已执行\n        ")]):t._e(),t._v(" "),"N"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          未执行\n        ")]):t._e(),t._v(" "),"R"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          执行中\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["N"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleEditClick(e.row)}}},[t._v("执行")]):t._e(),t._v(" "),"Y"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleEditClick(e.row)}}},[t._v("重新执行")]):t._e(),t._v(" "),"R"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:"",disabled:""}},[t._v("重新执行")]):t._e(),t._v(" "),"N"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleDrag(e.row)}}},[t._v("查看详情")]):t._e(),t._v(" "),"N"===e.row.status?a("el-button",{attrs:{disabled:t.statusChange,size:"mini",type:"primary",plain:"",disabled:""},on:{click:function(a){return t.handleDrag(e.row)}}},[t._v("查看详情")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDeleteClick(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.adhocTotalNum>=10,expression:"adhocTotalNum>=10"}],staticClass:"text-center"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.result_page,total:t.adhocTotalNum},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.result_page=e},"update:current-page":function(e){t.result_page=e}}})],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.dialogTableVisible,title:"Ad-hoc Result",width:"70%"},on:{"update:visible":function(e){t.dialogTableVisible=e},dragDialog:function(t){}}},[a("div",{staticClass:"divcalss"},[a("span",{staticStyle:{color:"#f0f8ff"}},[a("pre",[t._v(t._s(this.detail_result))])])])])],1)},staticRenderFns:[]};var r={name:"PlaybookTask",directives:{elDragDialog:l},props:["taskList","params","statusOptions","totalNum"],filters:{statusFilter:function(t){return{Y:"success",N:"info",R:"warning"}[t]},resultFilter:function(t){return{skipped:"info",failed:"danger",ok:"success",status:"success",unreachable:"warning",changed:"text"}[t]}},data:function(){return{statusChange:!1,loading:!1,upLoadUrl:"",intervalId:0,dialogTableVisible:!1,jsonData:"",result_page:1,flushData:"",ChangeTaskStatus:{id:"",name:"",status:"R"},deleteTaskStatus:{id:"",status:"",name:"",is_visible:"N"},detail_result:""}},methods:{updateTask:function(t){void 0!==this.$refs.ChangeTaskStatus&&this.$refs.ChangeTaskStatus.resetFields();var e=t.id,a=t.name,s=t.status;this.ChangeTaskStatus={id:e,name:a,status:s},this.ChangeTaskStatus.status="R"},deleteTask:function(t){void 0!==this.$refs.deleteTaskStatus&&this.$refs.deleteTaskStatus.resetFields();var e=t.id,a=t.is_visible,s=t.status,l=t.name;this.deleteTaskStatus={id:e,is_visible:a,status:s,name:l},this.deleteTaskStatus.is_visible="N"},handleCurrentPlaybookChange:function(t){this.$emit("handleCurrentPlaybookChange",t)},handleDrag:function(t){this.dialogTableVisible=!0,this.detail_result=JSON.parse(t.detail_result)},handleEditClick:function(t){this.updateTask(t),this.$emit("handleEditPlaybookClick",this.ChangeTaskStatus)},handleDeleteClick:function(t){this.deleteTask(t),this.$emit("handleDeletePlaybookClick",this.deleteTaskStatus)}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.taskList,"element-loading-text":"Loading...",border:"",size:"medium","highlight-current-row":""}},[a("el-table-column",{attrs:{label:"ID",prop:"id",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.id))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"任务名称",width:"180px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"playbook",label:"playbook",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"执行结果",width:"480px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.result_view,function(e){return a("span",[a("el-tag",{attrs:{size:"mini ",type:t._f("resultFilter")(e.name)}},[t._v("\n                "+t._s(e.name)+"\n                ")]),t._v(" "),a("span",{staticStyle:{color:"#4d4d4d"}},[t._v(" "+t._s(e.num))]),t._v(" "),a("span")],1)})}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"exec_time",label:"执行时间",width:"170px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"创建时间",width:"170px",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"状态","class-name":"status-col",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return["Y"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          已执行\n        ")]):t._e(),t._v(" "),"N"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          未执行\n        ")]):t._e(),t._v(" "),"R"===s.status?a("el-tag",{attrs:{type:t._f("statusFilter")(s.status)}},[t._v("\n          执行中\n        ")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",width:"280",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return["N"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleEditClick(e.row)}}},[t._v("执行")]):t._e(),t._v(" "),"Y"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleEditClick(e.row)}}},[t._v("重新执行")]):t._e(),t._v(" "),"R"===e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:"",disabled:""}},[t._v("重新执行")]):t._e(),t._v(" "),"N"!=e.row.status?a("el-button",{attrs:{size:"mini",type:"primary",plain:""},on:{click:function(a){return t.handleDrag(e.row)}}},[t._v("查看详情")]):t._e(),t._v(" "),"N"===e.row.status?a("el-button",{attrs:{disabled:t.statusChange,size:"mini",type:"primary",plain:"",disabled:""},on:{click:function(a){return t.handleDrag(e.row)}}},[t._v("查看详情")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.handleDeleteClick(e.row)}}},[t._v("删除")])]}}])},[t._v("\n      a\n    ")])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalNum>=10,expression:"totalNum>=10"}],staticClass:"text-center"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next, jumper","current-page":t.result_page,total:t.totalNum},on:{"current-change":t.handleCurrentPlaybookChange,"update:currentPage":function(e){t.result_page=e},"update:current-page":function(e){t.result_page=e}}})],1),t._v(" "),a("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:t.dialogTableVisible,title:"Playbook Result",width:"70%"},on:{"update:visible":function(e){t.dialogTableVisible=e},dragDialog:function(t){}}},[a("div",{staticClass:"divcalss"},[a("span",{staticStyle:{color:"#f0f8ff"}},[a("pre",[t._v(t._s(this.detail_result))])])])])],1)},staticRenderFns:[]};var c={name:"Task",directives:{elDragDialog:l},components:{AdhocTask:a("/Xao")(i,o,!1,function(t){a("lgHu")},"data-v-4988d6b4",null).exports,PlaybookTask:a("/Xao")(r,d,!1,function(t){a("T3aJ")},"data-v-0a520e49",null).exports},filters:{statusFilter:function(t){return{Y:"success",N:"info",R:"warning"}[t]},resultFilter:function(t){return{skipped:"info",failed:"danger",ok:"success",status:"success",unreachable:"warning",changed:"text"}[t]}},data:function(){return{statusChange:!1,activeName:"Playbook",taskType:["Playbook","Ad-hoc"],loading:!1,upLoadUrl:"",intervalId:0,intervalIdAdhoc:0,taskList:[],adhocTaskLists:[],fileList:[],currentTaskType:"",statusOptions:["已执行","未执行","执行中"],moduleNameSelect:["copy","ping","cron","service","shell","script","yum","setup","file","group","user","stat","mount"],totalNum:0,adhocTotalNum:0,dialogTableVisible:!1,dialogVisibleForAdd:!1,dialogVisibleForAddPlaybook:!1,dialogVisibleForAddAdhoc:!1,result_page:1,detail_result:"",addPlaybookTask:{name:"",status:"N",playbook:""},addAdHocTask:{name:"",status:"N",exec_host:"",model_name:"",model_args:""},params:{type:"",name:"",status:"",page:1},adhocParams:{type:"",name:"",status:"",page:1},searchForms:{currentTaskType:"",status:"",name:""}}},methods:{fetchData:function(){var t=this;this.loading=!0,Object(s.f)(this.params).then(function(e){t.taskList=e.results,t.taskList.forEach(function(t){try{t.result_view=JSON.parse(t.result_view.replace(/'/g,'"'))}catch(t){console.log(t)}}),t.totalNum=e.count,t.loading=!1}),Object(s.e)(this.adhocParams).then(function(e){t.adhocTaskLists=e.results,t.adhocTaskLists.forEach(function(t){try{t.result_view=JSON.parse(t.result_view.replace(/'/g,'"'))}catch(t){console.log(t)}}),t.adhocTotalNum=e.count,t.loading=!1})},handleFileChange:function(t,e){if(e.length>0){var a=e[e.length-1];this.fileList=[a],this.addPlaybookTask.playbook=a.raw}else this.fileList=[]},handleRemove:function(t,e){console.log(t,e)},handleEditAdhocClick:function(t){var e=this;Object(s.c)(t.id,t).then(function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()})},handleEditPlaybookClick:function(t){var e=this;Object(s.d)(t.id,t).then(function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()})},handleCurrentPlaybookChange:function(t){this.params.page=t,this.fetchData()},handleCurrentChangeAdhoc:function(t){this.adhocParams.page=t,this.fetchData()},handleDeletePlaybookClick:function(t){var e=this;this.$confirm("是否删除 ["+t.name+"]","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.d)(t.id,t).then(function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()}).catch(function(){e.$message({message:"删除失败",type:"error"})})})},handleDeleteAdhocClick:function(t){var e=this;this.$confirm("是否删除 "+t.name,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.c)(t.id,t).then(function(t){e.$message({message:"操作成功",type:"success"}),e.fetchData()}).catch(function(){e.$message({message:"删除失败",type:"error"})})})},handleDrag:function(t){this.dialogTableVisible=!0,this.detail_result=JSON.parse(t.detail_result)},handleFilter:function(){"Playbook"===this.activeName?(this.params.page=1,"未执行"===this.searchForms.status?this.params.status="N":"已执行"===this.searchForms.status?this.params.status="Y":"执行中"===this.searchForms.status?this.params.status="R":this.params.status="",this.params.name=this.searchForms.name,console.log("params",this.params),this.fetchData()):"Ad-hoc"===this.activeName&&(this.adhocParams.page=1,"未执行"===this.searchForms.status?this.adhocParams.status="N":"已执行"===this.searchForms.status?this.adhocParams.status="Y":"执行中"===this.searchForms.status?this.adhocParams.status="R":this.adhocParams.status="",console.log(this.adhocParams),this.adhocParams.name=this.searchForms.name,this.fetchData())},handleCancelAddPlaybook:function(){this.dialogVisibleForAddPlaybook=!1,this.dialogVisibleForAdd=!1},handleCancelAddAdhoc:function(){this.dialogVisibleForAddAdhoc=!1,this.dialogVisibleForAdd=!1},handleAddBtn:function(){this.dialogVisibleForAdd=!0},submitUpload:function(){this.$refs.upload.submit()},HandleTaskTypeChange:function(){this.activeName=this.searchForms.currentTaskType},handleSubmitAddAdHocTask:function(){var t=this;Object(s.a)(this.addAdHocTask).then(function(e){t.$message({message:"创建Ad-hoc任务成功",type:"success"}),t.handleCancelAddAdhoc(),t.fetchData()})},handleSubmitAddPlaybookTask:function(){var t=this;console.log("addPlaybookTask",this.addPlaybookTask);var e=new FormData;e.append("name",this.addPlaybookTask.name),e.append("playbook",this.addPlaybookTask.playbook),Object(s.b)(e).then(function(e){t.$message({message:"创建任务成功",type:"success"}),t.handleCancelAddPlaybook(),t.fetchData()})}},created:function(){this.fetchData()},watch:{taskList:function(t){var e=this;!this.intervalId&&this.taskList.some(function(t){return"R"===t.status})?this.intervalId=setInterval(function(){e.fetchData()},5e3):this.intervalId&&this.taskList.every(function(t){return"R"!==t.status})&&(clearInterval(this.intervalId),this.intervalId=null)},adhocTaskLists:function(t){var e=this;!this.intervalIdAdhoc&&this.adhocTaskLists.some(function(t){return"R"===t.status})?this.intervalIdAdhoc=setInterval(function(){e.fetchData()},5e3):this.intervalIdAdhoc&&this.adhocTaskLists.every(function(t){return"R"!==t.status})&&(clearInterval(this.intervalIdAdhoc),this.intervalIdAdhoc=null)}},beforeDestroy:function(){clearInterval(this.intervalId),clearInterval(this.intervalIdAdhoc)}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"margin-top":"10px","margin-left":"10px","margin-right":"10px"}},[a("div",{staticClass:"filter-container"},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"任务模式",size:"small","default-first-option":""},on:{change:t.HandleTaskTypeChange},model:{value:t.searchForms.currentTaskType,callback:function(e){t.$set(t.searchForms,"currentTaskType",e)},expression:"searchForms.currentTaskType"}},t._l(t.taskType,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"执行状态",clearable:"",size:"small","default-first-option":""},model:{value:t.searchForms.status,callback:function(e){t.$set(t.searchForms,"status",e)},expression:"searchForms.status"}},t._l(t.statusOptions,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}),1),t._v(" "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"任务名称",size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleFilter(e)}},model:{value:t.searchForms.name,callback:function(e){t.$set(t.searchForms,"name",e)},expression:"searchForms.name"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"info",size:"small",icon:"el-icon-search",plain:""},on:{click:t.handleFilter}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-edit",plain:""},on:{click:t.handleAddBtn}},[t._v("添加")])],1),t._v(" "),a("el-tabs",{attrs:{type:"border-card"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Playbook",name:"Playbook"}},[a("PlaybookTask",{attrs:{params:t.params,taskList:t.taskList,statusOptions:t.statusOptions,totalNum:t.totalNum},on:{handleCurrentPlaybookChange:t.handleCurrentPlaybookChange,handleEditPlaybookClick:t.handleEditPlaybookClick,handleDeletePlaybookClick:t.handleDeletePlaybookClick}})],1),t._v(" "),a("el-tab-pane",{attrs:{label:"Ad-hoc",name:"Ad-hoc"}},[a("AdhocTask",{attrs:{params:t.params,adhocTaskLists:t.adhocTaskLists,statusOptions:t.statusOptions,adhocTotalNum:t.adhocTotalNum},on:{handleEditAdhocClick:t.handleEditAdhocClick,handleDeleteAdhocClick:t.handleDeleteAdhocClick,handleCurrentChangeAdhoc:t.handleCurrentChangeAdhoc}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加任务",center:"",visible:t.dialogVisibleForAdd,width:"15%"},on:{"update:visible":function(e){t.dialogVisibleForAdd=e}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleForAddPlaybook=!0}}},[t._v("Playbook")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleForAddAdhoc=!0}}},[t._v("Ad-hoc")])],1),t._v(" "),a("el-dialog",{attrs:{title:"添加Playbook任务",visible:t.dialogVisibleForAddPlaybook,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.dialogVisibleForAddPlaybook=e}}},[a("el-form",{ref:"addTaskPolicy",attrs:{model:t.addPlaybookTask,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.addPlaybookTask.name,callback:function(e){t.$set(t.addPlaybookTask,"name",e)},expression:"addPlaybookTask.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"playbook",prop:"playbook"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.upLoadUrl,"on-remove":t.handleRemove,"on-change":t.handleFileChange,"file-list":t.fileList,"auto-upload":!1}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传yml文件")])],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleForAddPlaybook=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitAddPlaybookTask}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加Ad-hoc任务",visible:t.dialogVisibleForAddAdhoc,"append-to-body":!0,width:"30%"},on:{"update:visible":function(e){t.dialogVisibleForAddAdhoc=e}}},[a("el-form",{ref:"addAdHocTask",attrs:{model:t.addAdHocTask,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"任务名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.addAdHocTask.name,callback:function(e){t.$set(t.addAdHocTask,"name",e)},expression:"addAdHocTask.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"执行主机IP",prop:"exec_host"}},[a("el-input",{attrs:{placeholder:"执行主机IP， 多个主机IP以逗号（,）分隔"},model:{value:t.addAdHocTask.exec_host,callback:function(e){t.$set(t.addAdHocTask,"exec_host",e)},expression:"addAdHocTask.exec_host"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"执行模块名称",prop:"model_name"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择模块名称"},model:{value:t.addAdHocTask.model_name,callback:function(e){t.$set(t.addAdHocTask,"model_name",e)},expression:"addAdHocTask.model_name"}},t._l(t.moduleNameSelect,function(t){return a("el-option",{key:t,attrs:{label:t,value:t,size:"medium"}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"执行模块参数",prop:"model_args"}},[a("el-input",{attrs:{placeholder:"请输入执行模块参数"},model:{value:t.addAdHocTask.model_args,callback:function(e){t.$set(t.addAdHocTask,"model_args",e)},expression:"addAdHocTask.model_args"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleForAddAdhoc=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmitAddAdHocTask}},[t._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var h=a("/Xao")(c,u,!1,function(t){a("MPCZ")},"data-v-9e0f7f88",null);e.default=h.exports},"0MVJ":function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"\n.divcalss[data-v-9e0f7f88] {\n  background: #1f2d3d;\n  color: #1f2d3d;\n  overflow: scroll;\n  height: 600px;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n}\n.el-pagination[data-v-9e0f7f88] {\n  margin-top: 15px;\n}\n",""])},"7FXV":function(t,e,a){"use strict";e.f=function(t){return Object(s.a)({url:"/task/",method:"get",params:t})},e.d=function(t,e){return Object(s.a)({url:"/task/"+t+"/",method:"PATCH",data:e})},e.b=function(t){return Object(s.a)({url:"/task/",method:"POST",data:t})},e.e=function(t){return Object(s.a)({url:"/adhoc_task/",method:"get",params:t})},e.c=function(t,e){return Object(s.a)({url:"/adhoc_task/"+t+"/",method:"PATCH",data:e})},e.a=function(t){return Object(s.a)({url:"/adhoc_task/",method:"POST",data:t})};var s=a("vLgD")},MPCZ:function(t,e,a){var s=a("0MVJ");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("0d27286f",s,!0)},Nm2R:function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"\n.divcalss[data-v-4988d6b4] {\n  background: #1f2d3d;\n  color: #1f2d3d;\n  overflow: scroll;\n  height: 600px;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n}\n.el-pagination[data-v-4988d6b4] {\n  margin-top: 15px;\n}\n",""])},PCAL:function(t,e,a){(t.exports=a("UTlt")(!1)).push([t.i,"\n.divcalss[data-v-0a520e49] {\n  background: #1f2d3d;\n  color: #1f2d3d;\n  overflow: scroll;\n  height: 600px;\n  -webkit-user-select: text;\n     -moz-user-select: text;\n      -ms-user-select: text;\n          user-select: text;\n}\n.el-pagination[data-v-0a520e49] {\n  margin-top: 15px;\n}\n",""])},T3aJ:function(t,e,a){var s=a("PCAL");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("56cce049",s,!0)},lgHu:function(t,e,a){var s=a("Nm2R");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("76fed40a",s,!0)}});